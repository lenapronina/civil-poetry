(()=>{"use strict";var e={200:(e,t,n)=>{e.exports=n.p+"9742bdd8f7eee13cafe7.svg"},197:(e,t,n)=>{e.exports=n.p+"743a4416cb957ca0bef7.svg"},816:(e,t,n)=>{e.exports=n.p+"c27ecb4e34e28d6451ec.svg"},253:(e,t,n)=>{e.exports=n.p+"0c3828e4467a18cf9f3a.svg"},533:(e,t,n)=>{e.exports=n.p+"4a1c0828893e2abb37fd.png"},989:(e,t,n)=>{e.exports=n.p+"d05e4951755ba295c2b6.png"},354:(e,t,n)=>{e.exports=n.p+"7f924f5ea4ab5fa5b737.svg"},480:(e,t,n)=>{e.exports=n.p+"3f621cc87bb65c681de8.svg"},855:(e,t,n)=>{e.exports=n.p+"b7336401cff32b195292.svg"},121:(e,t,n)=>{e.exports=n.p+"1b4451314a8c3a91a8ae.svg"},186:(e,t,n)=>{e.exports=n.p+"eae7dddb60ff8a0b7f96.svg"},95:(e,t,n)=>{e.exports=n.p+"7ebe59306266247968f9.svg"},931:(e,t,n)=>{e.exports=n.p+"833e87a680e72709540d.svg"},765:(e,t,n)=>{e.exports=n.p+"ec905cd240a9a902d845.svg"},390:(e,t,n)=>{e.exports=n.p+"cfdadf96c3b5d30f6c2b.png"},585:(e,t,n)=>{e.exports=n.p+"c1b47250d24eebb2a1d9.png"}},t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.p="",(()=>{var e=n(200),t=n(197);const r=[{id:1,cathegory:"ЖКХ",image:e,preview:"И вот вдоль тротуара мчится",text:"И вот вдоль тротуара мчится Ручей, его вода грязна Он - знак для жителей столицы, Что где-то в эти дни весна",author:"Владимир Солоухин"},{id:2,cathegory:"Цены и налоги",image:t,preview:"И с нашей публики меж тем",text:"И с нашей публики меж тем\nБери умеренную плату,\nЗа книжку по пяти рублей -\nНалог не тягостный, ей-ей.",author:"Александр Пушкин"},{id:3,cathegory:"Дороги",image:n(816),preview:"Трагедии, представленной в провинции",text:"Трагедии, представленной в провинции,\nДо центра затруднительно дойти.\nКакие рвы и ямы на пути!\nКогда еще добьешься до правительства!",author:"Борис Слуцкий"},{id:4,cathegory:"Цены и налоги",image:t,preview:"Нас поборами царь",text:"Нас поборами царь\nИссушил, как сухарь:\nТо дороги,\nТо налоги,\nРазорили нас вконец.",author:"Кондратий Рылеев"},{id:5,cathegory:"Соседи",image:n(253),preview:"Был мой сосед",text:"Был мой сосед,\nИ, если в рай пошёл он,\nХочу я в ад,\nКоль райский сад\nТаких соседей полон.\n",author:"Роберт Бёрнс (перевод С.Я. Маршак)"},{id:6,cathegory:"ЖКХ",image:e,preview:"Весь дом одряхлел и заглох",text:"Весь дом одряхлел и заглох,\nНа стенах, на крышах, на ставнях\nУже пробивается мох.",author:"Дмитрий Кедрин"}];function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputList=Array.from(document.querySelectorAll(".popup__input")),this._buttonElement=document.querySelector(".popup__submit-button"),this._formElement=document.querySelector(".popup__form")}var t,n;return t=e,(n=[{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._isValid(t),e._toggleButtonState()}))}))}},{key:"_isValid",value:function(e){e.validity.valid?e.classList.remove("popup__input_invalid"):e.classList.add("popup__input_invalid")}},{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._buttonElement.classList.add("popup__submit-button_inactive"):this._buttonElement.classList.remove("popup__submit-button_inactive")}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"resetValidation",value:function(){var e=this;this._inputList.forEach((function(t){t.value="",e._isValid(t)})),this._toggleButtonState()}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&o(t.prototype,n),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cardName=t,this._openResultPopup=r,this._poems=n}var t,n;return t=e,(n=[{key:"_getSubcategoryTemplate",value:function(){return document.querySelector(".popup-subcategory-template").content.children[0].cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._element.addEventListener("click",(function(){e._openResultPopup(e._poems)}))}},{key:"createElement",value:function(){return this._element=this._getSubcategoryTemplate(),this._element.querySelector(".problem__name").textContent=this._cardName,this._setEventListeners(),this._element}}])&&s(t.prototype,n),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n,r,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._categoryTemplateSelector=o,this._name=t,this._src=n,this._subcategories=r,this._createSubcategoryPopup=a}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._categoryTemplateSelector).content.children[0].cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._element.addEventListener("click",(function(){e._createSubcategoryPopup(e._subcategories,e._name)}))}},{key:"createCategory",value:function(){return this._element=this._getTemplate(),this._elementImage=this._element.querySelector(".problem__image"),this._elementImage.src=this._src,this._elementImage.alt=this._name,this._element.id=this._id,this._element.querySelector(".problem__name").textContent=this._name,this._setEventListeners(),this._element}}])&&c(t.prototype,n),e}(),p=[{name:"Соседи",src:n(931),subcategories:[{name:"Шумят",poems:[""]}]},{name:"ЖКХ",src:n(186),subcategories:[{name:"Отопление",poems:[""]},{name:"Свет",poems:["Кто ответит мне &mdash;<br>Что за дом такой,<br>Почему во тьме,<br>Как барак чумной?<br>Свет лампад погас,<br>Воздух вылился&hellip;<br>Али жить у вас<br>Разучилися?"]},{name:"Вода",poems:["На войне, в пыли походной,<br>В летний зной и в холода,<br>Лучше нет простой, природной<br>Из колодца, из пруда,<br>Из трубы водопроводной,<br>Из копытного следа,<br>Из реки, какой угодно,<br>Из ручья, из-подо льда,<br>- Лучше нет воды холодной,<br>Лишь вода была б &mdash; вода."]},{name:"Сосульки",poems:[""]},{name:"Не убирают",poems:[""]},{name:"Не чинят",poems:["Наш старый дом встречает новый день,<br>лукаво сдвинув крышу набекрень,<br>подмигивая солнечным стеклом,<br>не зная, что назначен он на слом"]}]},{name:"Дураки",src:n(855),subcategories:[{name:"Ну дураки и дураки",poems:[""]}]},{name:"Дороги",src:n(480),subcategories:[{name:"Снег",poems:["Заметает пурга<br>Белый путь,<br>Хочет в мягких снегах<br>Потонуть.<br>Ветер резвый уснул<br>На пути;<br>Ни проехать в лесу,<br>Ни пройти."]},{name:"Ямы",poems:["С утра садимся мы в телегу;<br>Мы рады голову сломать<br>И, презирая лень и негу,<br>Кричим: пошел! Еб*на мать!"]},{name:"Пробки",poems:["Возле Каменного моста,<br>Где течет Москва-река,<br>Возле Каменного моста<br>Стала улица узка.<br>Там на улице заторы,<br>Там волнуются шоферы.<br>&mdash; Ох,&mdash; вздыхает постовой,<br>Дом мешает угловой!"]},{name:"Общественный транспорт",poems:["Когда состаришься - ходи<br>По улице пешком.<br>Не лезь в автобус, все равно<br>Стоять придется там.<br>И нынче мало дураков,<br>Чтоб место уступать,<br>А к тем далеким временам<br>Не станет их совсем."]}]},{name:"Бедствия",src:n(354),subcategories:[{name:"Мне плохо",poems:["Друг мой, друг мой,<br>Я очень и очень болен.<br>Сам не знаю, откуда взялась эта боль.<br>То ли ветер свистит<br>Над пустым и безлюдным полем,<br>То ль, как рощу в сентябрь,<br>Осыпает мозги алкоголь."]},{name:"Другому плохо",poems:["И если умирает человек,<br>с ним умирает первый его снег,<br>и первый поцелуй, и первый бой&hellip;<br>Все это забирает он с собой."]},{name:"Пожар",poems:["Огонь же &mdash; рвется от земли,<br>от Зла, Добра и прочей швали,<br>почти всегда по вертикали,<br>как это мы узнать могли.","Что за дым над головой? <br />Что за гром по мостовой? <br />Дом пылает за углом, <br />Сто зевак стоят кругом. <br />Ставит лестницы команда, <br />От огня спасает дом. <br />Весь чердак уже в огне, <br />Бьются голуби в окне."]},{name:"Потоп",poems:[""]}]},{name:"Экология",src:n(121),subcategories:[{name:"Пропали птицы",poems:["Ласточки пропали,<br>А вчера зарёй<br>Всё грачи летали<br>Да, как сеть, мелькали<br>Вон над той горой."]},{name:"Вырубают леса",poems:[""]}]},{name:"Доска объявлений",src:n(95),subcategories:[{name:"Пропала собака",poems:[""]},{name:"Пропал дом",poems:[""]}]},{name:"Гос. структуры",src:n(765),subcategories:[{name:"Медицина",poems:["Дом стоял На этом месте!\n        Он пропал С жильцами вместе!\n        — Где четвертый номер дома?\n        Он был виден за версту!\n        — Говорит тревожно Сёма\n        Постовому на мосту.\n        —Возвратился я из Крыма,\n        Мне домой необходимо!\n        Где высокий серый дом?\n        У меня там мама в нем!\n        "]},{name:"Школы",poems:[""]},{name:"Бюрократия",poems:["Я волком бы<br>выгрыз<br>бюрократизм.<br>К мандатам<br>почтения нету.<br>К любым<br>чертям с матерями<br>катись<br>любая бумажка."]}]}],l=n(390),m=n(533),_=n(585),h=n(989);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseURL=n,this._headers=r}var t,n;return t=e,(n=[{key:"_checkResStatus",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getNews",value:function(){var e=this;return fetch("".concat(this._baseURL,"/news"),{headers:this._headers}).then((function(t){return e._checkResStatus(t)}))}},{key:"getClaims",value:function(){var e=this;return fetch("".concat(this._baseURL,"/claims"),{headers:this._headers}).then((function(t){return e._checkResStatus(t)}))}},{key:"getAllInitialData",value:function(){return Promise.all([this.getNews(),this.getClaims()])}},{key:"postNewClaim",value:function(e){var t=this;return fetch("".concat(this._baseURL,"/claims"),{method:"POST",headers:this._headers,body:JSON.stringify({applicant:e.name,location:e.location,poems:e.poems,author:e.author,type:e.type})}).then((function(e){return t._checkResStatus(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch("".concat(this._baseURL,"/news/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return t._checkResStatus(e)}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this._baseURL,"/news/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._checkResStatus(e)}))}}])&&b(t.prototype,n),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._form=this._popup.querySelector(".popup__form"),this._submitButton=this._popup.querySelector(".popup__submit-button"),this._submitForm=n,this._poem=this._form.querySelector(".popup__text")}var t,n;return t=e,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList=this._form.querySelectorAll(".popup__input"),this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues.poems=this._poem.textContent,this._formValues}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submitForm(e._getInputValues())}))}}])&&f(t.prototype,n),e}(),y=new d({baseUrl:"https://civil-poetry-app.herokuapp.com",headers:{"Content-Type":"application/json"}}),g=document.querySelector(".popup_submit-success"),S=document.querySelectorAll(".popup"),L=document.querySelector(".popup__link");new v(".popup_result",(function(e){y.postNewClaim(e).then((function(e){g.classList.add("popup_opened"),L.addEventListener("click",(function(){S.forEach((function(e){e.classList.remove("popup_opened")}))}))})).catch((function(e){return console.log(e)}))})).setEventListeners();var k=document.querySelector(".claim-list"),E=document.querySelector(".popular__more"),q=document.querySelector(".popup_result"),x=document.querySelector(".problems-list__wrapper"),w=document.querySelector(".problems-list__wrapper_popup"),C=q.querySelector(".popup__poem-button_next"),T=q.querySelector(".popup__poem-button_prev"),R=document.querySelector(".popup_subcategories"),V=R.querySelector(".popup__heading"),I=document.querySelector(".popup__wrapper_subcategories"),P=document.querySelector(".popup__wrapper_result"),A=Array.from(document.querySelectorAll(".card")),N=document.querySelector(".popup_news"),U=N.querySelector(".button");function j(e,t){e.forEach((function(e){var n=document.querySelector(".claim-template").content.cloneNode(!0),r=n.querySelector(".claim__id"),o=n.querySelector(".claim__cathegory"),a=n.querySelector(".claim__verse"),s=n.querySelector(".claim"),i=n.querySelector(".claim__author");r.src=e.image,o.textContent=e.cathegory,a.textContent=e.preview;var c=!1;s.addEventListener("click",(function(){!1===c?(a.textContent=e.text,c=!0,i.textContent=e.author):(a.textContent=e.preview,c=!1,i.textContent="")})),t.append(n)}))}j(r.slice(0,3),k);var O=document.querySelector(".popular__button");O.addEventListener("click",(function(){j(r.slice(3,6),k),E.textContent="Чуть позже добавим еще новости!",O.style.display="none"}));var D=document.querySelector(".hello__arrow-bottom"),B=document.querySelector(".problems-list");document.querySelector(".ticker").querySelector(".ticker__line"),document.querySelectorAll(".ticker").forEach((function(e){!function(e,t,n){var r=e,o=r.querySelector(".ticker__line"),a=o.offsetWidth,s=o.cloneNode(!0);r.appendChild(s);var i,c,u=performance.now();requestAnimationFrame((function e(t){(i=(t-u)/1e4)>1&&(i%=1,u=t),c=a*i,o.style.transform="translate(-".concat(c,"px, 0 )"),s.style.transform="translate(-".concat(c,"px, 0 )"),requestAnimationFrame(e)}))}(e)})),D.addEventListener("click",(function(){B.scrollIntoView()})),I.addEventListener("click",(function(){R.querySelectorAll(".problem_popup").forEach((function(e){e.remove()})),R.classList.remove("popup_opened")})),P.addEventListener("click",(function(){q.classList.remove("popup_opened")})),A.forEach((function(e){e.addEventListener("click",(function(){N.classList.add("popup_opened")}))})),U.addEventListener("click",(function(){N.classList.remove("popup_opened")}));var F=new a;F.enableValidation();var H=function(e,t){e.forEach((function(e){var t=new i(e.name,e.poems,J);w.append(t.createElement())})),V.textContent=t,R.classList.add("popup_opened")},M=q.querySelector(".popup__go-to-main-button"),J=function(e){F.resetValidation();var t=0,n=function(n){n.preventDefault(),t++,o(t,e),a(t,e),q.querySelector(".popup__text").innerHTML=e[t]},r=function(n){n.preventDefault(),t--,o(t,e),a(t,e),q.querySelector(".popup__text").innerHTML=e[t]},o=function(e,t){null==t[e+1]?(C.querySelector(".popup__poem-button-icon").src=l,C.removeEventListener("click",n)):(C.querySelector(".popup__poem-button-icon").src=_,C.addEventListener("click",n))},a=function(e,t){null==t[e-1]?(T.querySelector(".popup__poem-button-icon").src=m,T.removeEventListener("click",r)):(T.querySelector(".popup__poem-button-icon").src=h,T.addEventListener("click",r))};q.querySelector(".popup__text").innerHTML=e[t],C.addEventListener("click",n),T.addEventListener("click",r),M.addEventListener("click",(function(){S.forEach((function(e){e.classList.remove("popup_opened")}))})),P.addEventListener("click",(function(){q.classList.remove("popup_opened"),e=null,t=null})),o(t,e),a(t,e),q.classList.add("popup_opened")};p.forEach((function(e){var t=new u(e.name,e.src,e.subcategories,".problem-template",H);x.append(t.createCategory())}))})()})();